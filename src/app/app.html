<main class="container mt-5 mb-5">

  <h1 class="text-center mb-4 fw-semibold">
    {{ title }}
  </h1>

  @if (errorMessage()) {
    <div class="alert alert-danger">
      {{ errorMessage() }}
    </div>
  }

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <app-status-chart></app-status-chart>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <mat-form-field appearance="outline" class="w-100 mb-3">
        <mat-label>{{ searchConfig.label }}</mat-label>
        <input matInput (keyup)="applyFilter($event)" [placeholder]="searchConfig.placeholder" />
      </mat-form-field>

      <table mat-table [dataSource]="dataSource" class="mat-elevation-z1 w-100">
        @for (header of tableHeaders; track header.key) {
          <ng-container [matColumnDef]="header.key">
            <th mat-header-cell *matHeaderCellDef class="text-muted">
              {{ header.label }}
            </th>
            <td mat-cell *matCellDef="let element" class="text-muted">
              @if (header.key === 'statusName') {
                <span class="badge rounded-pill" [class]="getStatusClass(element.statusName)">
                  {{ element.statusName }}
                </span>
              } @else {
                {{ element[header.key] }}
              }
            </td>
          </ng-container>
        }

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <mat-paginator
        class="text-muted"
        [length]="dataSource.data.length"
        [pageSize]="5"
        [pageSizeOptions]="[5, 10, 20]"
        showFirstLastButtons>
      </mat-paginator>
    </div>
  </div>

</main>